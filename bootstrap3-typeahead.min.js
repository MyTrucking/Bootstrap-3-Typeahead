!function(a,b){"use strict";"undefined"!=typeof module&&module.exports?module.exports=b(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],function(a){return b(a)}):b(a.jQuery)}(this,function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.typeahead.defaults,c),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.select=this.options.select||this.select,this.autoSelect="boolean"!=typeof this.options.autoSelect||this.options.autoSelect,this.highlighter=this.options.highlighter||this.highlighter,this.render=this.options.render||this.render,this.updater=this.options.updater||this.updater,this.displayText=this.options.displayText||this.displayText,this.source=this.options.source,this.delay=this.options.delay,this.$menu=a(this.options.menu),this.$appendTo=this.options.appendTo?a(this.options.appendTo):null,this.fitToElement="boolean"==typeof this.options.fitToElement&&this.options.fitToElement,this.containerOffset=this.options.containerOffset||function(){return 0},this.shown=!1,this.listen(),this.showHintOnFocus=("boolean"==typeof this.options.showHintOnFocus||"all"===this.options.showHintOnFocus)&&this.options.showHintOnFocus,this.afterSelect=this.options.afterSelect,this.addItem=!1,this.value=this.$element.val()||this.$element.text(),this.firstTime=!0};b.prototype={constructor:b,select:function(){var a=this.$menu.find(".active").data("value");if(a){this.$element.data("active",a);var b=this.updater(a);b||(b=""),this.elementSetText(b).afterSelect(b)}return this.hide()},updater:function(a){return a},setSource:function(a){this.source=a},activate:function(){this.listenWindowEvents(),this.query=this.getDefaultQuery(),this.menu(this.source,!1)},show:function(b){var c,d=a(window),e=a.extend({},this.$element.position(),{height:this.$element[0].offsetHeight}),f="function"==typeof this.options.scrollHeight?this.options.scrollHeight.call():this.options.scrollHeight;if(this.shown?c=this.$menu:this.$appendTo?(c=this.$menu.appendTo(this.$appendTo),this.hasSameParent=this.$appendTo.is(this.$element.parent())):(c=this.$menu.insertAfter(this.$element),this.hasSameParent=!0),!this.hasSameParent){c.css("position","fixed");var g=this.$element.offset();e.top=g.top,e.left=g.left}var h=a(c).parent().hasClass("dropup"),i=h?"auto":e.top+e.height+f,j=a(c).hasClass("dropdown-menu-right"),k=j?"auto":e.left,l="auto";return h||(l=d.height()-i+d.scrollTop()-this.containerOffset()-20,l=l<115?115:l),c.css({top:i,left:k,maxHeight:l}).show(),b&&this.$menu.scrollTop(b.position().top-this.$menu.height()/2-b.height()/2),!0===this.options.fitToElement&&c.css("width",this.$element.outerWidth()+"px"),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.stopListenWindowEvents(),this.elementSetText(this.$element.data("active")),this.shown=!1,this},getDefaultQuery:function(){return this.$element.val()||this.$element.text()||""},lookup:function(b){if(this.query=void 0!==b&&null!==b?b:this.getDefaultQuery(),this.query.length<this.options.minLength&&!this.options.showHintOnFocus)return this.shown?this.hide():this;var c=a.proxy(function(){a.isFunction(this.source)?this.source(this.query,a.proxy(this.process,this)):this.source&&this.process(this.source)},this);clearTimeout(this.lookupWorker),this.lookupWorker=setTimeout(c,this.delay)},process:function(b){var c=this;return b=a.grep(b,function(a){return c.matcher(a)}),b=this.sorter(b),b.length||this.options.addItem||b.push({__type:"message",text:'No results matched "'+this.query+'"'}),this.menu(b)},menu:function(a,b){var c;return this.options.addItem&&a.push(this.options.addItem),a="all"==this.options.items?a:a.slice(0,this.options.items),c=this.render(a,b),this.firstTime&&c&&(this.firstTime=!1,this.$element.data("active",c.data("value"))),this.show(c)},matcher:function(a){return~this.displayText(a).toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(a){for(var b,c=[],d=[],e=[];b=a.shift();){var f=this.displayText(b);f.toLowerCase().indexOf(this.query.toLowerCase())?~f.indexOf(this.query)?d.push(b):e.push(b):c.push(b)}return c.concat(d,e)},highlighter:function(b){var c,d,e,f,g=a("<div></div>"),h=this.query,i=b.toLowerCase().indexOf(h.toLowerCase()),j=h.length;if(0===j)return g.text(b).html();for(;i>-1;)c=b.substr(0,i),d=b.substr(i,j),e=b.substr(i+j),f=a("<strong></strong>").text(d),g.append(document.createTextNode(c)).append(f),b=e,i=b.toLowerCase().indexOf(h.toLowerCase());return g.append(document.createTextNode(b)).html()},render:function(b,c){var d=this,e=this,f=!1,g=[],h=d.options.separator;return c=!1!==c,a.each(b,function(a,c){a>0&&c[h]!==b[a-1][h]&&g.push({__type:"divider"}),!c[h]||0!==a&&c[h]===b[a-1][h]||g.push({__type:"category",name:c[h]}),g.push(c)}),b=a(g).map(function(b,h){if("category"==(h.__type||!1))return a(d.options.headerHtml).text(h.name)[0];if("divider"==(h.__type||!1))return a(d.options.headerDivider)[0];if("message"==(h.__type||!1))return b=a(d.options.headerHtml).text(h.text),1==g.length&&(f=b),b[0];var i=e.displayText(h);return b=a(d.options.item).data("value",h),b.find("a").html(c?d.highlighter(i,h):i),i&&i==e.$element.val()&&(b.addClass("active"),f=b),b[0]}),this.autoSelect&&!f&&(f=b.filter(":not(.dropdown-header)").first().addClass("active")),this.$menu.html(b),f},displayText:function(a){return void 0!==a&&void 0!==a.name&&a.name||""},selectText:function(){var a=this.$element[0];return setTimeout(function(){a.select()},0),this},elementSetText:function(a){return this.value=a&&a.id?this.displayText(a):"",this.$element.val(this.value).text(this.value).change(),this},next:function(b){var c=this.$menu.find(".active").removeClass("active"),d=c.next();d.length||(d=a(this.$menu.find("li")[0])),d.addClass("active")},prev:function(a){var b=this.$menu.find(".active").removeClass("active"),c=b.prev();c.length||(c=this.$menu.find("li").last()),c.addClass("active")},listen:function(){this.$element.on("click",a.proxy(this.elementClick,this)).on("focus",a.proxy(this.focus,this)).on("blur",a.proxy(this.blur,this)).on("keypress",a.proxy(this.keypress,this)).on("input",a.proxy(this.input,this)).on("keyup",a.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",a.proxy(this.keydown,this)),this.$menu.on("click","li",a.proxy(this.click,this)).on("mouseenter","li",a.proxy(this.mouseenter,this)).on("mouseleave","li",a.proxy(this.mouseleave,this)).on("mousedown",a.proxy(this.mousedown,this))},listenWindowEvents:function(){a(window).on("resize.typeahead scroll.typeahead",a.proxy(this.show,this))},stopListenWindowEvents:function(){a(window).off("resize.typeahead scroll.typeahead")},destroy:function(){this.stopListenWindowEvents(),this.$element.data("typeahead",null),this.$element.data("active",null),this.$element.off("focus").off("blur").off("keypress").off("input").off("keyup"),this.eventSupported("keydown")&&this.$element.off("keydown"),this.$menu.remove(),this.destroyed=!0},eventSupported:function(a){var b=a in this.$element;return b||(this.$element.setAttribute(a,"return;"),b="function"==typeof this.$element[a]),b},move:function(a){if(this.shown)switch(a.keyCode){case 9:this.shown&&(this.select(),this.$element.focus());break;case 13:case 27:a.preventDefault();break;case 38:if(a.shiftKey)return;a.preventDefault(),this.prev();break;case 40:if(a.shiftKey)return;a.preventDefault(),this.next()}},keydown:function(b){this.suppressKeyPressRepeat=~a.inArray(b.keyCode,[40,38,9,13,27]),this.shown?this.move(b):40==b.keyCode?(this.selectText(),this.activate()):13==b.keyCode&&b.preventDefault()},keypress:function(a){this.suppressKeyPressRepeat||this.move(a)},input:function(a){var b=this.$element.val();this.value!==b&&(this.value=b,b?this.lookup():(this.query="",this.menu(this.source,!1)))},keyup:function(a){if(!this.destroyed)switch(a.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:this.activate();break;case 13:this.shown?(this.select(),this.selectText()):this.activate();break;case 27:if(!this.shown)return;this.hide()}},focus:function(a){this.focused||(this.focused=!0)},elementClick:function(a){this.shown||(this.selectText(),this.activate())},blur:function(a){this.mousedover||this.mouseddown||!this.shown?this.mouseddown&&(this.skipShowHintOnFocus=!0,this.$element.focus(),this.mouseddown=!1):(this.hide(),this.focused=!1)},click:function(b){b.preventDefault(),this.skipShowHintOnFocus=!0,this.$menu.find(".active").removeClass("active"),a(b.currentTarget).addClass("active"),this.select(),this.selectText()},mouseenter:function(a){this.mousedover=!0},mouseleave:function(a){this.mousedover=!1,!this.focused&&this.shown&&this.hide()},mousedown:function(a){a.preventDefault(),this.mouseddown=!0,this.$menu.one("mouseup",function(a){this.mouseddown=!1}.bind(this))}};var c=a.fn.typeahead;a.fn.typeahead=function(c){var d=arguments;return"string"==typeof c&&"getActive"==c?this.data("active"):this.each(function(){var e=a(this),f=e.data("typeahead"),g="object"==typeof c&&c;f||e.data("typeahead",f=new b(this,g)),"string"==typeof c&&f[c]&&(d.length>1?f[c].apply(f,Array.prototype.slice.call(d,1)):f[c]())})},a.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu" role="listbox"></ul>',item:'<li><a class="dropdown-item" href="#" role="option"></a></li>',minLength:1,scrollHeight:0,autoSelect:!0,afterSelect:a.noop,addItem:!1,delay:0,separator:"category",headerHtml:'<li class="dropdown-header"></li>',headerDivider:'<li class="divider" role="separator"></li>'},a.fn.typeahead.Constructor=b,a.fn.typeahead.noConflict=function(){return a.fn.typeahead=c,this},a(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(b){var c=a(this);c.data("typeahead")||c.typeahead(c.data())})});